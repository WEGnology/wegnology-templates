# Estação de Tratamento de Efluentes

Esta aplicação para [Estação de Tratamento de Efluentes](/dashboards/~exportplaceholderid-dashboard-otimizacaoControleDePH-0~), é uma ilustração de uma solução de monitoramento para os processos no tratamento de efluentes. Este é um aplicativo, multilocatário, que pode oferecer a seus clientes soluções para monitoramento remoto de seus equipamentos, além de aplicação de algoritmos matemáticos para encontrar melhor sintonia para a sua malha de controle e a economia financeira que haverá com a diminuição do consumo para a sintonia calculada, a cada nova sintonia calculada maior pode ser o ganho em relação ao consumo atual aplicado no sistema do usuário, e uso de algoritmos
de Inteligencia Artificial para melhor entendimento e previsão, do comportamento de algumas variáveis, permitindo assim que o processo ocorra com uma melhor eficiência, diminuindo as perdas financeiras dos clientes.

## Descrição

Em uma implementação real, poderiamos utilizar sensores e hardware para coletar os dados do processo e enviá-los ao WEGnology com uso de protocolos de comunicação, para que estes dados cheguem até o device criado na aplicação. Para este modelo, serão fornecidas ao usuário duas tabelas
de dados de demonstração para possibilitar ao usuário que não possui dados próprios, a utilização deste template, já para os usuários que possuem seus próprios dados, é necessario que o nome das colunas dos arquivos que contém os dados, seja o mesmo nome da coluna dos dados de demonstração dos arquivos .xlsx.

Esse modelo apresenta um dashboard para otimizar o processo de controle de pH em ETEs, neste dashboard são aprensentados resultados de análises feitas na API da BirminD, para que os dados mostrados nesta tela, possibilite ao cliente a otimização do seu processo e a melhora da sua performance.
 Para uso de dados nesta aplicação são disponibilizadas duas tabelas [Dados_ETE](https://files.wnology.io/~exportplaceholderid-application-applicationBirminDEstacaoDeTratamentoDeEfluentes-0~/Dados_ETE.xlsx) e [DadoETE_Relevance](https://files.wnology.io/~exportplaceholderid-application-applicationBirminDEstacaoDeTratamentoDeEfluentes-0~/DadoETE_Relevance.xlsx), que devem ser baixadas e salvas no formato de arquivo .csv, para que assim seja possível importa-las para esta aplicação na seção de [Data Tables](/applications/~exportplaceholderid-application-applicationBirminDEstacaoDeTratamentoDeEfluentes-0~/data-tables).
 Os dados serão coletados das tabelas e após serem importadas devem ser armazenadas nos DEVICES [DeviceETE](/applications/~exportplaceholderid-application-applicationBirminDEstacaoDeTratamentoDeEfluentes-0~/devices/~exportplaceholderid-device-deviceEte-0~/attributes) e [DeviceETERelevance](/applications/~exportplaceholderid-application-applicationBirminDEstacaoDeTratamentoDeEfluentes-0~/devices/~exportplaceholderid-device-deviceEteRelevance-1~/attributes), cada tabela deve enviar os dados pro device correspondente aos seus dados de análise, os dados serão obtidos das tabelas e enviados para o device
 através do WORKFLOW [Insert Value](/applications/~exportplaceholderid-application-applicationBirminDEstacaoDeTratamentoDeEfluentes-0~/workflows/~exportplaceholderid-flow-insertValue-1~/develop), alguns dados do processo de controle de pH são obtidos desta tabela e mostrado em um dos blocos presentes no DASHBOARD [Otimização Controle de pH](/dashboards/~exportplaceholderid-dashboard-otimizacaoControleDePH-0~).
 
 A API da BirminD irá receber esses dados salvos e aplicar seus algoritmos matemáticos e de inteligência artificial, para otimizar o processo de controle de pH da ETE, este pedido de análise para se gerar estes cálculos são realizados nos workflows [Anomalia](/applications/~exportplaceholderid-application-applicationBirminDEstacaoDeTratamentoDeEfluentes-0~/workflows/~exportplaceholderid-flow-anomalia-0~/develop), [Predicao](/applications/~exportplaceholderid-application-applicationBirminDEstacaoDeTratamentoDeEfluentes-0~/workflows/~exportplaceholderid-flow-predicao-2~/develop), [Relevancia](/applications/~exportplaceholderid-application-applicationBirminDEstacaoDeTratamentoDeEfluentes-0~/workflows/~exportplaceholderid-flow-relevance-3~/develop) e [Sintonia](/applications/~exportplaceholderid-application-applicationBirminDEstacaoDeTratamentoDeEfluentes-0~/workflows/~exportplaceholderid-flow-sintonia-4~/develop), onde cada um destes workflows fica responsável por um tipo de análise, para posteriormente ser mostrado no DASHBOARD [Otimização Controle de pH](/dashboards/~exportplaceholderid-dashboard-otimizacaoControleDePH-0~) o resultado destas análises e as variáveis envolvidas no processo.

## Componentes Chave

Aqui estará sendo apresentada uma lista com os principais componentes desta aplicação desenvolvida. 

* TABELAS [Dados_ETE](https://files.wnology.io/~exportplaceholderid-application-applicationBirminDEstacaoDeTratamentoDeEfluentes-0~/Dados_ETE.xlsx) e [DadoETE_Relevance](https://files.wnology.io/~exportplaceholderid-application-applicationBirminDEstacaoDeTratamentoDeEfluentes-0~/DadoETE_Relevance.xlsx), que devem ser salvas em .csv e posteriormente importadas na seção [Data Tables](/applications/~exportplaceholderid-application-applicationBirminDEstacaoDeTratamentoDeEfluentes-0~/data-tables).
* DEVICE [DeviceETE](/applications/~exportplaceholderid-application-applicationBirminDEstacaoDeTratamentoDeEfluentes-0~/devices/~exportplaceholderid-device-deviceEte-0~/attributes): O dispositivo é responsável por salvar os dados coletado da *tabela de dados*, servindo de referência para obtenção dos dados que irão ser analisado pelo algoritmo de anomalia, predicao e sintonia.
* DEVICE [DeviceETERelevance](/applications/~exportplaceholderid-application-applicationBirminDEstacaoDeTratamentoDeEfluentes-0~/devices/~exportplaceholderid-device-deviceEteRelevance-1~/attributes): O dispositivo é responsável por salvar os dados coletado da *tabela de relevance*, servindo de referência para obtenção dos dados que irão ser analisado pelo algoritmo de relevância.
* WORKFLOW [Insert Value](/applications/~exportplaceholderid-application-applicationBirminDEstacaoDeTratamentoDeEfluentes-0~/workflows/~exportplaceholderid-flow-insertValue-1~/develop): Insert Value é o *workflow* que possui a funcionalidade de obter os dados de cada *tabela* selecionada através do bloco de [Table: Get Rows](https://docs.app.wnology.io/workflows/data/table-get-rows/), e enviar estes dados para o *device* correto.
* WORKFLOW [Anomalia](/applications/~exportplaceholderid-application-applicationBirminDEstacaoDeTratamentoDeEfluentes-0~/workflows/~exportplaceholderid-flow-anomalia-0~/develop): Anomalia é o *workflow* que possui a função de coletar os dados do *device ETEAnomalia*, para gerar uma ordem de análise de anomalia através do bloco nomeado de Order, e posteriormente enviar o resultado desta análise para o *dashboard* desenvolvido.
* WORKFLOW [Predicao](/applications/~exportplaceholderid-application-applicationBirminDEstacaoDeTratamentoDeEfluentes-0~/workflows/~exportplaceholderid-flow-predicao-2~/develop): Predicao é o *workflow* que possui a função de coletar os dados do *device ETEPredict*, para gerar uma ordem de análise de predição através do bloco nomeado de Order, e posteriormente enviar o resultado desta análise para o *dashboard* desenvolvido.
* WORKFLOW [Relevancia](/applications/~exportplaceholderid-application-applicationBirminDEstacaoDeTratamentoDeEfluentes-0~/workflows/~exportplaceholderid-flow-relevance-3~/develop): Relevancia é o *workflow* que possui a função de coletar os dados do *device ETERelevancia*, para gerar uma ordem de análise de relevância através do bloco nomeado de Order, e posteriormente enviar o resultado desta análise para o *dashboard* desenvolvido.
* WORKFLOW [Sintonia](/applications/~exportplaceholderid-application-applicationBirminDEstacaoDeTratamentoDeEfluentes-0~/workflows/~exportplaceholderid-flow-sintonia-4~/develop): Sintonia é o *workflow* que possui a função de coletar os dados do *device ETESintonia*, para gerar uma ordem de análise de sintonia para a malha de controle do sistema, através do bloco nomeado de Order, e posteriormente enviar o resultado desta análise para o *dashboard* desenvolvido.
* DASHBOARD [Otimização Controle de pH](/dashboards/~exportplaceholderid-dashboard-otimizacaoControleDePH-0~): Painel de fácil visualização dos dados, para acompanhamento das variáveis de processo de controle de pH, e visualização dos resultados obtidos após aplicação dos algoritmos da BirminD, essa análise é gerada por cada *workflow* nomeado de acordo com o tipo de análise que está configurado para realizar a ordem de cálculo. Neste *dashboard* está presente um botão com a função de atualizar os dados salvos nos devices, apagando os dados antigos armazenados e salvando os novos dados de acordo com as tabelas selecionadas no *workflow insert value*, e há os botões para controle das análise realizada nesta aplicação, em cada bloco de análise há estes botões de controle permitindo que sejam realizadas apenas as análises desejadas pelo usuário, pode ser gerada a solicitação de análise atráves do botão recalcular e o botão aplicar para ser aplicado o resultado da análise para a tela nos blocos presentes no *dashboard*.
* EXPERIENCE [ETE BirminD](https://templateete.wnology.io): Página experience que o usuário é redirecionado para uma visualização da tela de forma direta, a tela apresentada é a mesma do *dashboard* com as mesmas funcionalidades, sem precisar acessar o WEGnology, ao entrar no link, o usuário é redirecionado para uma tela de login, onde devem ser fornecidos o usuário e senha cadastrados com os usuários mostrados abaixo, após realizado o login, o usuário será redirecionado para a página onde será mostrada a tela para acompanhamento do processo de controle do pH.

### Usuários para acesso da página de Experience

Este template possui os seguintes usuários:

1. ete@birmind.com.br - Ao se importar a aplicação deve ser gerada uma nova senha para este user.

Pode se alterar estes dados, adicionando, removendo ou modificando estes usuários da aplicação através da [User & Group page](/applications/~exportplaceholderid-application-applicationBirminDEstacaoDeTratamentoDeEfluentes-0~/experience/users).

## Configuração

1. Para iniciar o uso desta aplicação, os usuários devem obter um USERNAME, PASSWORD e ID de PROJETO, com uma licença que permita ao cliente realizar análises na API da BirminD, para isso é necessário o preenchimento do formulário da BirminD, para ir até este formulário acesse [Aqui](https://www.birmind.com.br/api-license/register/).
2. Realizar o download das TABELAS [Dados_ETE](https://files.wnology.io/~exportplaceholderid-application-applicationBirminDEstacaoDeTratamentoDeEfluentes-0~/Dados_ETE.xlsx) e [DadoETE_Relevance](https://files.wnology.io/~exportplaceholderid-application-applicationBirminDEstacaoDeTratamentoDeEfluentes-0~/DadoETE_Relevance.xlsx), que devem ser importadas na seção [Data Tables](/applications/~exportplaceholderid-application-applicationBirminDEstacaoDeTratamentoDeEfluentes-0~/data-tables), os arquivos das tabelas também podem ser encontrados nos [files](/applications/~exportplaceholderid-application-applicationBirminDEstacaoDeTratamentoDeEfluentes-0~/files).
3. Após download das tabelas, elas devem ser salvas no formato .csv e em seguida importadas para a seção [Data Tables](/applications/~exportplaceholderid-application-applicationBirminDEstacaoDeTratamentoDeEfluentes-0~/data-tables).
    - Quando for fazer o import das tabelas os usuários devem ficar atentos a classificação do tipo da coluna, as colunas reconhecidas pelo WEGnology como BOOLEAN, devem ser alteradas para o tipo NUMBER no momento de importá-las para esta aplicação.
4. É necessário gerar um API token nesta aplicação, para que seja possível a API da BirminD conversar com os devices e realizar as análises matemáticas e de machine learning. Para se gerar este token, o usuário precisa acessar a seção de [API Tokens](/applications/~exportplaceholderid-application-applicationBirminDEstacaoDeTratamentoDeEfluentes-0~/application-tokens), apertar o botão Add Application Token, nomear o arquivo, selecionar a opção de *never expires* e a opção *all permissions*, e apertar o botão para criar este API Token, posteriormente o arquivo gerado deve ser salvo, e copiado o código de token, pois será utilizado em configurações futuras.
5. Acessar a seção dos [WORKFLOWS](/applications/~exportplaceholderid-application-applicationBirminDEstacaoDeTratamentoDeEfluentes-0~/workflows), e realizar as seguintes ações:
    - Habilite o WORKFLOW [Insert Values](/applications/~exportplaceholderid-application-applicationBirminDEstacaoDeTratamentoDeEfluentes-0~/workflows/~exportplaceholderid-flow-insertValue-1~/develop) selecionando o toggle switch presente do lado do ícone de lixeira, ficando com a cor verde.
    - Habilite o WORKFLOW [Anomalia](/applications/~exportplaceholderid-application-applicationBirminDEstacaoDeTratamentoDeEfluentes-0~/workflows/~exportplaceholderid-flow-anomalia-0~/develop) selecionando o toggle switch presente do lado do ícone de lixeira, ficando com a cor verde.
    - Habilite o WORKFLOW [Predicao](/applications/~exportplaceholderid-application-applicationBirminDEstacaoDeTratamentoDeEfluentes-0~/workflows/~exportplaceholderid-flow-predicao-2~/develop) selecionando o toggle switch presente do lado do ícone de lixeira, ficando com a cor verde.
    - Habilite o WORKFLOW [Relevance](/applications/~exportplaceholderid-application-applicationBirminDEstacaoDeTratamentoDeEfluentes-0~/workflows/~exportplaceholderid-flow-relevance-3~/develop) selecionando o toggle switch presente do lado do ícone de lixeira, ficando com a cor verde.
    - Habilite o WORKFLOW [Sintonia](/applications/~exportplaceholderid-application-applicationBirminDEstacaoDeTratamentoDeEfluentes-0~/workflows/~exportplaceholderid-flow-sintonia-4~/develop) selecionando o toggle switch presente do lado do ícone de lixeira, ficando com a cor verde.
6. Após ativado os *workflows* o usuário deverá começar as configurações dos workflows para eles ficarem funcionais, agora o usuário deverá acessar o WORKFLOW [Insert Values](/applications/~exportplaceholderid-application-applicationBirminDEstacaoDeTratamentoDeEfluentes-0~/workflows/~exportplaceholderid-flow-insertValue-1~/develop), e seguir as seguintes etapas:
    - Em cada bloco nomeado de Linhas Tabela, o usuário deverá acessar o bloco e inserir no campo Value o número de linhas da tabela que o workflow será responsável por coletar os dados, como padrão para as tabelas fornecidas em um bloco está inserido o valor 12784 que é o número de linhas da tabela [Dados_ETE](https://files.wnology.io/~exportplaceholderid-application-applicationBirminDEstacaoDeTratamentoDeEfluentes-0~/Dados_ETE.xlsx), e outro está com o valor 5416 que é o número de linhas da tabela [DadoETE_Relevance](https://files.wnology.io/~exportplaceholderid-application-applicationBirminDEstacaoDeTratamentoDeEfluentes-0~/DadoETE_Relevance.xlsx).
    - Acessar cada bloco de loop, e no bloco [Table: Get Rows](https://docs.app.wnology.io/workflows/data/table-get-rows/), deve ser selecionada a *tabela* que o *workflow* ficará responsável por coletar os dados e enviar aos *devices*, cada linha do *workflow* é encarregada por enviar os dados da *tabela* correspondente ao *device*.
7. Acessar a área das variáveis globais, encontrada na aba de settings do menu do lado esquerdo desta tela, com nome de [Globals](/applications/~exportplaceholderid-application-applicationBirminDEstacaoDeTratamentoDeEfluentes-0~/globals) clicar em *expand all*, e em cada variável global inserir no campo *value* o valor correspondente para aquela variável.
    - Para a variável *user* inserir o username obtido ao preencher o [forms](https://www.birmind.com.br/api-license/register/).
    - Para a variável *pass* inserir o password obtido ao preencher o formulário.
    - Para a variável *idProjeto* inserir o ProjectId obtido após preencher o forms.
    - Para a variável *tokAPI* inserir o tokenAPI gerado na seção de [API Tokens](/applications/~exportplaceholderid-application-applicationBirminDEstacaoDeTratamentoDeEfluentes-0~/application-tokens), como se gerar este token é explicado no passo 4.
8. Assim que realizada todas as etapas, o usuário deverá acessar o DASHBOARD [Otimização Controle de pH](/dashboards/~exportplaceholderid-dashboard-otimizacaoControleDePH-0~) para poder visualizar a tela desenvolvida para o cliente. Ao ser acessado o *dashboard* o cliente deverá:
    - Selecionar o botão atualizar dados, o qual dará um trigger no *WORKFLOW INSERT VALUES* para poder enviar os dados salvos nas *TABELAS* importadas para os respectivos *DEVICES*.
    - Apertar o botão Recalcular presente em cada bloco de análise *Sintonia*, *Anomalia*, *Relevancia* e *Predicao*, no total há 4 botões, para se gerar cada ordem de cálculo para serem feitas as análises, de acordo com os dados salvos nos *devices*.
    - Após selecionar o botão para calcular as análises desejadas pelo cliente, é necessário aguardar alguns minutos enquanto as análises estão sendo realizadas na API da BirminD, e após este tempo deve ser selecionado em algum dos blocos de análise o botão aplicar, para que a página seja atualizada, e automaticamente dar um trigger em cada *WORKFLOW* de análise, para coletar os resultados das análises e apresentá-lo no *DASHBOARD*.
    - Em caso de não aparecer os resultados de análise após selecionar o botão aplicar, aguardar mais um tempo para selecionar novamente este botão, isto ocorre pois a API da BirminD pode estar com uma fila de análises o que acarreta em uma maior demora para se obter estes resultados.

Após realizadas estas etapas, o usuário poderá visualizar no *dashboard* como seria a tela de monitoramento para otimização do processo de controle de pH em Estações de Tratamento de Efluentes, atentando-se ao fato de que este *dashboard* é totalmente customizável, tanto para as variáveis monitoradas como as variáveis análisadas pelos algoritmos de machine learning, para isso o cliente deve entrar em contato com a equipe da BirminD através do [fórum](https://forums.app.wnology.io/) desta aplicação, ou contactando a BirminD
através do seu site acessando [Aqui](https://www.birmind.com.br/). Este *dashboard* também pode ser acessado através da *página experience* [ETE BirminD](https://templateete.wnology.io), onde será possível acessar apenas o dashboard e suas funcionalidades.

## Documentação Auxiliar

* Veja de maneira mais completa todos os passos e explicação para utilização deste template atráves do arquivo [README](https://files.wnology.io/~exportplaceholderid-application-applicationBirminDEstacaoDeTratamentoDeEfluentes-0~/README.md).

## Sobre

Este modelo está em sua versão 1.0.0

Para esclarecer qualquer dúvida ou resolução de problemas, recomendamos o uso do [fórum](https://forums.app.wnology.io/) ou entrar em contato conosco através do nosso [Site](https://www.birmind.com.br/).

Esse template foi criado por BirminD. Para obter detalhes da licença ou para enviar solicitações de recursos ou bugs, perguntas ou comentarios gerais contate-nos.

As informações de contato podem ser encontradas através do site da [BirminD](https://www.birmind.com.br/).

© 2021. All rights reserved. Powered by BirminD

Licenciado sob a licença MIT.

https://www.birmind.com.br

https://www.weg.net